import e from"crypto";let t,n,r=r=>((r=>{!t||t.length<r?(t=Buffer.allocUnsafe(128*r),e.randomFillSync(t),n=0):n+r>t.length&&(e.randomFillSync(t),n=0),n+=r})(r-=0),t.subarray(n-r,n)),l=(e,t=21)=>((e,t,n)=>{let r=(2<<31-Math.clz32(e.length-1|1))-1,l=Math.ceil(1.6*r*t/e.length);return(o=t)=>{let g="";for(;;){let t=n(l),a=l;for(;a--;)if(g+=e[t[a]&r]||"",g.length===o)return g}}})(e,t,r);const o=e=>+e>10?`${e}`:`0${e}`,g=({size:e=5,prefix:t="",date:n=!1,randomSet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"}={})=>{const g=l(r,e);return n?`${t}${(()=>{const e=new Date,t=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n=new Date(t);return`${`${n.getUTCFullYear()}`.slice(-2)+o(n.getUTCMonth()+1)+o(n.getUTCDate())}T${o(n.getUTCHours())}${o(n.getUTCMinutes())}${o(n.getUTCSeconds())}`})()}_${g()}`:`${t}${g()}`};export{g as genId};